import{a as O,c as h,i as B,d as F}from"./hoisted.a7090224.js";const S={};function k(e,t){return S[e]??=[],S[e][Math.min(t,e-t)]??=_(e,t),S[e][Math.min(t,e-t)]}function _(e,t){t=Math.min(t,e-t);let a=1;for(let n=e;n>e-t;n--)a*=n;for(let n=t;n>0;n--)a/=n;return a}function $(e,t){return Math.max((e(t+1e-11)-e(t-1e-11))/(2*1e-11),1e-11)}function Q(e,t){t??=0;let a=t,n=10;const s=c=>e(c)-t;do a-=s(a)/$(s,a),n-=1;while(n>0);return a}function H(e,t){const a=e.length-1;let n=0;for(let s=0;s<=a;s++)n+=k(a,s)*Math.pow(t,s)*Math.pow(1-t,a-s)*e[s];return n}function M(e){return t=>H(e,t)}function N(e){return t=>Q(M(e),t)}function E(e){const t=N([0,e[0],e[2],1]),a=M([0,e[1],e[3],1]);return n=>a(t(n))}const z={linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1]};function C(e){return z[e]??e}function x(e){return{steps:e.steps??4,range:{a:{start:e.range.a?e.range.a.start:0,end:e.range.a?e.range.a.end:0},b:{start:e.range.b?e.range.b.start:0,end:e.range.b?e.range.b.end:0},c:{start:e.range.c?e.range.c.start:0,end:e.range.c?e.range.c.end:100}},easing:{a:e.easing?e.easing.a??"linear":"linear",b:e.easing?e.easing.b??"linear":"linear",c:e.easing?e.easing.c??"linear":"linear"},format:e.format??"hsl"}}function A(e,t){const a=[],n=E(C(e.a)),s=E(C(e.b)),c=E(C(e.c)),o=t*2+1;for(let r=0;r<o;r++){const i=r/(o-1);a.push({a:n(i),b:s(i),c:c(i)})}return a}function G(e){const t=x(e),a=A(t.easing,t.steps),n=t.range,s=t.format,c=a.map(o=>({a:n.a.start+(n.a.end-n.a.start)*o.a,b:n.b.start+(n.b.end-n.b.start)*o.b,c:n.c.start+(n.c.end-n.c.start)*o.c}));return s==="hsl"?c.map(o=>({hue:Math.round(o.a),saturation:Math.round(o.b),luminosity:Math.round(o.c)})):c.map(o=>({red:Math.round(o.a),green:Math.round(o.b),blue:Math.round(o.c)}))}function P(e){const t=e.hue,a=e.saturation/100,n=e.luminosity/100,s=(1-Math.abs(2*n-1))*a,c=t/60,o=s*(1-Math.abs(c%2-1)),r=n-s/2;let[i,l,d]=[0,0,0];return c>=0&&c<1&&([i,l,d]=[s,o,0]),c>=1&&c<2&&([i,l,d]=[o,s,0]),c>=2&&c<3&&([i,l,d]=[0,s,o]),c>=3&&c<4&&([i,l,d]=[0,o,s]),c>=4&&c<5&&([i,l,d]=[o,0,s]),c>=5&&c<6&&([i,l,d]=[s,0,o]),[i,l,d]=[Math.round((i+r)*255),Math.round((l+r)*255),Math.round((d+r)*255)],{red:i,green:l,blue:d}}function T(e){const{red:t,green:a,blue:n}=e;return{red:t.toString(16).padStart(2,"0").toUpperCase(),green:a.toString(16).padStart(2,"0").toUpperCase(),blue:n.toString(16).padStart(2,"0").toUpperCase()}}function U(e){return T(P(e))}function j(e){const{hue:t,saturation:a,luminosity:n}=e,s=String(t).padStart(3," "),c=String(a).padStart(3," "),o=String(n).padStart(3," ");return`hsl(${s},${c}%,${o}%)`}function D(e){const{red:t,green:a,blue:n}=e,s=String(t).padStart(3," "),c=String(a).padStart(3," "),o=String(n).padStart(3," ");return`rgb(${s},${c},${o})`}function J(e){let{red:t,green:a,blue:n}=e;return`#${t}${a}${n}`}function I(e,t){let a;return t==="hex"?a=J(U(e)):t==="rgb"?a=D(P(e)):a=j(e),a}const b=h("hex");function K(){const e=document.createElement("div");e.classList.add("palenia-patch");const t=h({hue:0,saturation:0,luminosity:0});function a(s,c){const o=I(s,"hex");e.style.backgroundColor=o,e.setAttribute("data-patch-contrast",parseInt(o.slice(1),16)>16777215/2?"black":"white"),e.setAttribute("data-patch-label",I(s,c))}t.attend(s=>a(s,b.get())),b.attend(s=>a(t.get(),s),void 0,!0);function n(s){t.set(s)}return{element:e,setColor:n}}function V(){const e=document.createElement("div");e.classList.add("palenia-palette");const t=h(!1);t.attend(p=>{e.setAttribute("data-palette-selected",String(p))},void 0,!0);let a=()=>{};e.addEventListener("click",()=>{o(),e.scrollIntoView()});const n=[];function s(){const p=K();e.appendChild(p.element),n.push(p)}function c(){const p=n.pop();p&&e.removeChild(p.element)}function o(){t.set(!0),a()}function r(){t.set(!1)}function i(){return t.get()}function l(p){if(p.length!==n.length){const u=n.length-p.length,m=u>0?c:s;for(let g=0;g<Math.abs(u);g++)m()}p.forEach((u,m)=>n[m].setColor(u))}function d(p){a=p}return{element:e,select:o,unselect:r,isSelected:i,setPalette:l,onSelected:d}}function X(){const e=document.createElement("div");e.classList.add("palenia-catalogue");const t=[];let a=r=>{};function n(){const r=V();t.push(r),e.appendChild(r.element),r.onSelected(()=>{t.forEach(i=>i!==r&&i.unselect()),t.forEach((i,l)=>{i.isSelected()&&a(l)})}),t.length==1&&r.select()}function s(r){const i=t.splice(r,1)[0];e.removeChild(i.element),(t[r]??t[r-1]).select()}function c(r,i){i===void 0||!t[i]?(n(),c(r,t.length-1)):t[i].setPalette(r)}function o(r){a=r}return{element:e,remove:s,setPalette:c,onPaletteSwitch:o}}const v=["steps","range.a.start","range.a.end","range.b.start","range.b.end","range.c.start","range.c.end","easing.a","easing.b","easing.c"];function Y(e){const t=[],n=document.getElementById(e).elements;let s={cb:()=>{}};for(let u of v)n[u].addEventListener("input",()=>s.cb());function c(u){if(u===void 0||!t[u])d(),c(t.length-1);else for(let m of v){const g=n[m];"value"in g&&(g.value=O(t[u],m))}}function o(u){t.push(u)}function r(u){for(let m of v){const g=n[m];"value"in g&&O(t[u],m,g.value,(y,L,f)=>{y[L]=B(f)?Number(f):f})}}function i(u){s.cb=u}function l(u){return G(t.at(u??-1))}function d(){const u=t.at(-1)?structuredClone(t.at(-1)):{steps:4,range:{a:{start:276,end:276},b:{start:45,end:45},c:{start:3,end:97}},easing:{a:"linear",b:"linear",c:"easeInOut"},format:"hsl"};t.push(u)}function p(u){t.splice(u,1)}return{push:d,remove:p,setConfig:c,getForm:r,paletteFrom:l,onFormChange:i,registerConfig:o}}function q(e,t){const a=h(-1);a.attend(r=>{e.setConfig(r),t.setPalette(e.paletteFrom(r),r)}),e.onFormChange(()=>{const r=a.get();e.getForm(r),t.setPalette(e.paletteFrom(r),r)}),t.onPaletteSwitch(r=>{a.set(r)});function n(){e.push(),t.setPalette(e.paletteFrom())}function s(){e.remove(a.get()),t.remove(a.get())}function c(){return e.paletteFrom(a.get()).map(r=>I(r,b.get()))}function o(r){b.set(r)}return{addNew:n,removeCurrent:s,currentPalette:c,changeFormat:o}}window.addEventListener("load",function(){const e=Y("palenia-configure"),t=X(),{addNew:a,removeCurrent:n,changeFormat:s,currentPalette:c}=q(e,t);document.getElementById("color-board")?.append(t.element),document.getElementById("add-palette")?.addEventListener("click",a),document.getElementById("remove-palette")?.addEventListener("click",n),document.getElementById("color-space")?.addEventListener("input",r=>s(r.target.value)),document.getElementById("save")?.addEventListener("click",()=>{const r={},i=c();i.forEach((l,d)=>{r[`--color-${i.length-d}`]=l}),F(`palenia-${Date.now()}`,JSON.stringify(r,void 0,4))});const o=h(!1);o.attend(r=>{document.getElementById("color-board")?.setAttribute("data-show-patch-label",String(r)),document.getElementById("view-colors")?.setAttribute("data-show-patch-label",String(r))},void 0,!0),document.getElementById("view-colors")?.addEventListener("click",()=>o.set(!o.get()))});
