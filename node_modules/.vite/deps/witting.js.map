{
  "version": 3,
  "sources": ["../../witting/lib/main.js"],
  "sourcesContent": ["/* ----------------------------------------------------------------- */\nfunction openStateRegister() {\n    const REGISTER = {};\n    return {\n        addState(key, state) {\n            state.get\n                ? Object.assign(REGISTER, { [key]: state })\n                : Object.assign(REGISTER, { [key]: createState(state) });\n            return REGISTER[key];\n        },\n        getState(key) {\n            return REGISTER[key];\n        },\n        delState(key) {\n            delete REGISTER[key];\n        }\n    };\n}\nfunction createState(value) {\n    const STATE_CORE = {\n        state: value,\n        preactions: {},\n        reactions: {},\n    };\n    let attendantIndex = -1;\n    return {\n        get() { return STATE_CORE.state; },\n        set(newState) {\n            if (newState === STATE_CORE.state)\n                return;\n            for (const [_, preact] of Object.entries(STATE_CORE.preactions)) {\n                preact(newState, STATE_CORE.state);\n            }\n            ;\n            STATE_CORE.state = newState;\n            for (const [_, react] of Object.entries(STATE_CORE.reactions)) {\n                react(STATE_CORE.state);\n            }\n            ;\n        },\n        attend(react, preact, reactNow, preactNow) {\n            if (!preact && !react)\n                return { neglect() { } };\n            attendantIndex += 1;\n            const key = String(attendantIndex);\n            preact && Object.assign(STATE_CORE.preactions, { [key]: preact });\n            react && Object.assign(STATE_CORE.reactions, { [key]: react });\n            preact && preactNow && preact(STATE_CORE.state);\n            react && reactNow && react(STATE_CORE.state);\n            return {\n                neglect() {\n                    delete STATE_CORE.preactions[key];\n                    delete STATE_CORE.reactions[key];\n                }\n            };\n        },\n    };\n}\nfunction createStates(init) {\n    const { addState, getState } = openStateRegister();\n    if (Array.isArray(init)) {\n        for (const [i, val] of init.entries()) {\n            addState(String(i), val);\n        }\n        ;\n    }\n    else {\n        for (const key in init) {\n            addState(key, init[key]);\n        }\n        ;\n    }\n    ;\n    return { getState };\n}\nfunction induceWitting(something, getState) {\n    Object.assign(something, {\n        isWitting() { return true; },\n        setState(stateName, newValue) {\n            getState(stateName).set(newValue);\n        },\n    });\n    return something;\n}\nfunction isWitting(something) {\n    return \"isWitting\" in Object.entries(something);\n}\nconst State = createState;\nexport { openStateRegister, createState, State, createStates, induceWitting, isWitting, };\n"],
  "mappings": ";;;AACA,SAAS,oBAAoB;AACzB,QAAM,WAAW,CAAC;AAClB,SAAO;AAAA,IACH,SAAS,KAAK,OAAO;AACjB,YAAM,MACA,OAAO,OAAO,UAAU,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,IACxC,OAAO,OAAO,UAAU,EAAE,CAAC,GAAG,GAAG,YAAY,KAAK,EAAE,CAAC;AAC3D,aAAO,SAAS,GAAG;AAAA,IACvB;AAAA,IACA,SAAS,KAAK;AACV,aAAO,SAAS,GAAG;AAAA,IACvB;AAAA,IACA,SAAS,KAAK;AACV,aAAO,SAAS,GAAG;AAAA,IACvB;AAAA,EACJ;AACJ;AACA,SAAS,YAAY,OAAO;AACxB,QAAM,aAAa;AAAA,IACf,OAAO;AAAA,IACP,YAAY,CAAC;AAAA,IACb,WAAW,CAAC;AAAA,EAChB;AACA,MAAI,iBAAiB;AACrB,SAAO;AAAA,IACH,MAAM;AAAE,aAAO,WAAW;AAAA,IAAO;AAAA,IACjC,IAAI,UAAU;AACV,UAAI,aAAa,WAAW;AACxB;AACJ,iBAAW,CAAC,GAAG,MAAM,KAAK,OAAO,QAAQ,WAAW,UAAU,GAAG;AAC7D,eAAO,UAAU,WAAW,KAAK;AAAA,MACrC;AACA;AACA,iBAAW,QAAQ;AACnB,iBAAW,CAAC,GAAG,KAAK,KAAK,OAAO,QAAQ,WAAW,SAAS,GAAG;AAC3D,cAAM,WAAW,KAAK;AAAA,MAC1B;AACA;AAAA,IACJ;AAAA,IACA,OAAO,OAAO,QAAQ,UAAU,WAAW;AACvC,UAAI,CAAC,UAAU,CAAC;AACZ,eAAO,EAAE,UAAU;AAAA,QAAE,EAAE;AAC3B,wBAAkB;AAClB,YAAM,MAAM,OAAO,cAAc;AACjC,gBAAU,OAAO,OAAO,WAAW,YAAY,EAAE,CAAC,GAAG,GAAG,OAAO,CAAC;AAChE,eAAS,OAAO,OAAO,WAAW,WAAW,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC;AAC7D,gBAAU,aAAa,OAAO,WAAW,KAAK;AAC9C,eAAS,YAAY,MAAM,WAAW,KAAK;AAC3C,aAAO;AAAA,QACH,UAAU;AACN,iBAAO,WAAW,WAAW,GAAG;AAChC,iBAAO,WAAW,UAAU,GAAG;AAAA,QACnC;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AACJ;AACA,SAAS,aAAa,MAAM;AACxB,QAAM,EAAE,UAAU,SAAS,IAAI,kBAAkB;AACjD,MAAI,MAAM,QAAQ,IAAI,GAAG;AACrB,eAAW,CAAC,GAAG,GAAG,KAAK,KAAK,QAAQ,GAAG;AACnC,eAAS,OAAO,CAAC,GAAG,GAAG;AAAA,IAC3B;AACA;AAAA,EACJ,OACK;AACD,eAAW,OAAO,MAAM;AACpB,eAAS,KAAK,KAAK,GAAG,CAAC;AAAA,IAC3B;AACA;AAAA,EACJ;AACA;AACA,SAAO,EAAE,SAAS;AACtB;AACA,SAAS,cAAc,WAAW,UAAU;AACxC,SAAO,OAAO,WAAW;AAAA,IACrB,YAAY;AAAE,aAAO;AAAA,IAAM;AAAA,IAC3B,SAAS,WAAW,UAAU;AAC1B,eAAS,SAAS,EAAE,IAAI,QAAQ;AAAA,IACpC;AAAA,EACJ,CAAC;AACD,SAAO;AACX;AACA,SAAS,UAAU,WAAW;AAC1B,SAAO,eAAe,OAAO,QAAQ,SAAS;AAClD;AACA,IAAM,QAAQ;",
  "names": []
}
